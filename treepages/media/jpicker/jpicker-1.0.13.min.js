(function(e,a){var d=function(t,k){var o=this,j=t.find("img").eq(0),B=0,A=100,s=100,z=0,w=100,r=100,q=0,p=0,m,n=function(x){var y=t.offset();m={left:y.left,top:y.top};u(x);o.draw();e(document).bind("mousemove",l).bind("mouseup",h);x.stopPropagation();x.preventDefault();return false;},l=function(x){u(x);o.draw();x.stopPropagation();x.preventDefault();return false;},h=function(x){e(document).unbind("mouseup",h).unbind("mousemove",l);x.stopPropagation();x.preventDefault();return false;},u=function(E){var C=E.pageX-m.left,x=E.pageY-m.top,D=t.w,y=t.h;if(C<0){C=0;}else{if(C>D){C=D;}}if(x<0){x=0;}else{if(x>y){x=y;}}o.set_X(((C/D)*s)+B);o.set_Y(((x/y)*r)+z);e.isFunction(o.valuesChanged)&&o.valuesChanged(o);};e.extend(true,o,{settings:k,valuesChanged:e.isFunction(arguments[2])&&arguments[2]||null,get_X:function(){return q;},set_X:function(x){x=Math.floor(x);if(q==x){return;}if(x<B){x=B;}else{if(x>A){x=A;}}q=x;},get_Y:function(){return p;},set_Y:function(x){x=Math.floor(x);if(p==x){return;}if(x<z){x=z;}else{if(x>w){x=w;}}p=x;},set_RangeX:function(y,x){if(B==y&&A==x){return;}if(y>x){return;}B=y;A=x;s=A-B;},set_RangeY:function(y,x){if(z==y&&w==x){return;}if(y>x){return;}z=y;w=x;r=w-z;},draw:function(){var D=0,x=0,F=t.w,C=t.h,E=j.w,y=j.h;if(s>0){if(q==A){D=F;}else{D=Math.floor((q/s)*F);}}if(r>0){if(p==w){x=C;}else{x=Math.floor((p/r)*C);}}if(E>=F){D=(F>>1)-(E>>1);}else{D-=E>>1;}if(y>=C){x=(C>>1)-(y>>1);}else{x-=y>>1;}j.css({left:D+"px",top:x+"px"});},destroy:function(){e(document).unbind("mouseup",h).unbind("mousemove",l);t.unbind("mousedown",n);t=null;j=null;o.valuesChanged=null;}});var v=o.settings;j.src=v.arrow&&v.arrow.image;j.w=v.arrow&&v.arrow.width||j.width();j.h=v.arrow&&v.arrow.height||j.height();t.w=v.map&&v.map.width||t.width();t.h=v.map&&v.map.height||t.height();t.bind("mousedown",n);o.draw();e.isFunction(o.valuesChanged)&&o.valuesChanged(o);},b=function(p){var s=this,w=function(x){if(x.target.value==""){return;}if(!l.get_H()&&o.hue.val()==""){o.hue.val(0);}if(!l.get_S()&&o.saturation.val()==""){o.saturation.val(100);}if(!l.get_V()&&o.value.val()==""){o.value.val(100);}if(!l.get_A()&&o.alpha.val()==""){o.alpha.val(100);}k(x);s.setValuesFromHsva();e.isFunction(s.valuesChanged)&&s.valuesChanged(s);},u=function(x){if(x.target.value==""){return;}if(!l.get_R()&&o.red.val()==""){o.red.val(0);}if(!l.get_G()&&o.green.val()==""){o.green.val(0);}if(!l.get_B()&&o.blue.val()==""){o.blue.val(0);}if(!l.get_A()&&o.alpha.val()==""){o.alpha.val(100);}h(x);s.setValuesFromRgba();e.isFunction(s.valuesChanged)&&s.valuesChanged(s);},j=function(x){s.setValuesFromHsva();e.isFunction(s.valuesChanged)&&s.valuesChanged(s);},r=function(x){s.setValuesFromRgba();e.isFunction(s.valuesChanged)&&s.valuesChanged(s);},v=function(x){t(x);s.setValuesFromHex();e.isFunction(s.valuesChanged)&&s.valuesChanged(s);},q=function(x){if(x.target.value==""){s.setValuesFromHex();}},h=function(B){if(!m(B)){return B;}var A=n(o.red.val(),0,255),y=n(o.green.val(),0,255),x=n(o.blue.val(),0,255),z=n(o.alpha.val(),0,100);o.red.val(A!=null?A:"");o.green.val(y!=null?y:"");o.blue.val(x!=null?x:"");o.alpha.val(z!=null?z:"");},k=function(B){if(!m(B)){return B;}var x=n(o.hue.val(),0,360),y=n(o.saturation.val(),0,100),z=n(o.value.val(),0,100),A=n(o.alpha.val(),0,100);o.hue.val(x!=null?x:"");o.saturation.val(y!=null?y:"");o.value.val(z!=null?z:"");o.alpha.val(A!=null?A:"");},t=function(x){if(!m(x)){return x;}o.hex.val(o.hex.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,8));},m=function(x){switch(x.keyCode){case 9:case 16:case 29:case 37:case 38:case 40:return false;case"c".charCodeAt():case"v".charCodeAt():if(x.ctrlKey){return false;}}return true;},n=function(z,y,x){if(z==""||isNaN(z)){return y;}if(z>x){return x;}if(z<y){return y;}return z;};e.extend(true,s,{color:new f(),fields:{hue:p.find(".jPicker_HueText").eq(0),saturation:p.find(".jPicker_SaturationText").eq(0),value:p.find(".jPicker_BrightnessText").eq(0),red:p.find(".jPicker_RedText").eq(0),green:p.find(".jPicker_GreenText").eq(0),blue:p.find(".jPicker_BlueText").eq(0),hex:p.find(".jPicker_HexText").eq(0),alpha:p.find(".jPicker_AlphaText").eq(0)},valuesChanged:e.isFunction(arguments[1])&&arguments[1]||null,bindedHexKeyUp:function(x){v(x);},setValuesFromRgba:function(){if(o.red.val()==""&&o.green.val()==""&&o.blue.val()==""&&o.alpha.val()==""){return;}if(o.red.val()==""){o.red.val(0);}if(o.green.val()==""){o.green.val(0);}if(o.blue.val()==""){o.blue.val(0);}if(o.alpha.val()==""){o.alpha.val(100);}l.fromRgba(o.red.val(),o.green.val(),o.blue.val(),o.alpha.val());var y=l.get_Rgba(),x=l.get_H(),z=l.get_S(),A=l.get_V(),B=l.get_A();o.hex.val(y!=null?y:"");o.hue.val(x!=null?x:"");o.saturation.val(z!=null?z:"");o.value.val(A!=null?A:"");o.alpha.val(B!=null?B:"");},setValuesFromHsva:function(){if(o.hue.val()==""&&o.saturation.val()==""&&o.value.val()==""&&o.alpha.val()==""){return;}if(o.hue.val()==""){o.hue.val(0);}if(o.saturation.val()==""){o.saturation.val(0);}if(o.value.val()==""){o.value.val(0);}if(o.alpha.val()==""){o.alpha.val(100);}l.fromHsva(o.hue.val(),o.saturation.val(),o.value.val(),o.alpha.val());var y=l.get_Rgba(),B=l.get_R(),z=l.get_G(),x=l.get_B(),A=l.get_A();o.hex.val(y!=null?y:"");o.red.val(B!=null?B:"");o.green.val(z!=null?z:"");o.blue.val(x!=null?x:"");},setValuesFromHex:function(){l.fromHex(o.hex.val());var z=l.get_Rgba(),E=l.get_R(),C=l.get_G(),x=l.get_B(),D=l.get_A(),y=l.get_H(),A=l.get_S(),B=l.get_V();o.red.val(E!=null?E:"");o.green.val(C!=null?C:"");o.blue.val(x!=null?x:"");o.alpha.val(D!=null?D:"");o.hue.val(y!=null?y:"");o.saturation.val(A!=null?A:"");o.value.val(B!=null?B:"");},destroy:function(){o.hue.add(o.saturation).add(o.value).unbind("keyup",events.hsvKeyUp).unbind("blur",j);o.red.add(o.green).add(o.blue).add(o.alpha).unbind("keyup",events.rgbaKeyUp).unbind("blur",r);o.hex.unbind("keyup",v);o=null;l=null;s.valuesChanged=null;}});var o=s.fields,l=s.color;o.hue.add(o.saturation).add(o.value).bind("keyup",w).bind("blur",j);o.red.add(o.green).add(o.blue).add(o.alpha).bind("keyup",u).bind("blur",r);o.hex.bind("keyup",v).bind("blur",q);if(o.hex.val()!=""){l.fromHex(o.hex.val());s.setValuesFromHex();}};e.jPicker={List:[],Color:function(q){var m=this,j,l,n,o,k,t,p;e.extend(true,m,{get_R:function(){return j;},get_G:function(){return l;},get_B:function(){return n;},get_A:function(){return o;},get_Rgba:function(){return j!=null&&l!=null&&n!=null&&o!=null?g.rgbaToHex({r:j,g:l,b:n,a:o}):null;},get_Hex:function(){var h=m.get_Rgba();return h&&h.substring(0,6)||null;},get_H:function(){return k;},get_S:function(){return t;},get_V:function(){return p;},get_Hsv:function(){return{h:k,s:t,v:p};},fromRgba:function(v,s,h,u){j=Math.floor(v);l=Math.floor(s);n=Math.floor(h);o=Math.floor(u);var r=g.rgbToHsv({r:v,g:s,b:h});k=Math.floor(r.h);t=Math.floor(r.s);p=Math.floor(r.v);},fromHsva:function(h,s,u,v){k=Math.floor(h);t=Math.floor(s);p=Math.floor(u);o=Math.floor(v);var r=g.hsvToRgb({h:h,s:s,v:u});j=Math.floor(r.r);l=Math.floor(r.g);n=Math.floor(r.b);},fromHex:function(s){if(s==null||s==""){j=null;l=null;n=null;o=null;k=null;t=null;p=null;return;}var r=g.hexToRgba(s);j=Math.floor(r.r);l=Math.floor(r.g);n=Math.floor(r.b);o=Math.floor(r.a);var h=g.rgbToHsv({r:r.r,g:r.g,b:r.b});k=Math.floor(h.h);t=Math.floor(h.s);p=Math.floor(h.v);}});if(q){if(q.hex!=null&&q.hex!=""){m.fromHex(q.hex);}else{if(!isNaN(q.r)){m.fromRgba(q.r,q.g,q.b,q.a!=null?q.a:100);}else{if(!isNaN(q.h)){m.fromHsva(q.h,q.s,q.v,q.a!=null?q.a:100);}}}}},ColorMethods:{hexToRgba:function(m){m=this.validateHex(m);if(m==""){return{r:null,g:null,b:null,a:null};}var l="00",k="00",h="00",j="100";if(m.length==6){m+="ff";}if(m.length>6){l=m.substring(0,2);k=m.substring(2,4);h=m.substring(4,6);j=m.substring(6,m.length);}else{if(m.length>4){l=m.substring(4,m.length);m=m.substring(0,4);}if(m.length>2){k=m.substring(2,m.length);m=m.substring(0,2);}if(m.length>0){h=m.substring(0,m.length);}}return{r:this.hexToInt(l),g:this.hexToInt(k),b:this.hexToInt(h),a:Math.floor((this.hexToInt(j)*100)/255)};},validateHex:function(h){h=h.toLowerCase().replace(/[^a-f0-9]/g,"");if(h.length>8){h=h.substring(0,8);}return h;},rgbaToHex:function(h){return this.intToHex(h.r)+this.intToHex(h.g)+this.intToHex(h.b)+this.intToHex(Math.floor((h.a*255)/100));},intToHex:function(j){var h=Math.floor(j).toString(16);if(h.length==1){h=("0"+h);}return h.toLowerCase();},hexToInt:function(h){return parseInt(h,16);},rgbToHsv:function(l){var o=l.r/255,n=l.g/255,j=l.b/255,k={h:0,s:0,v:0},m=0,h=0,p;if(o>=n&&o>=j){h=o;m=n>j?j:n;}else{if(n>=j&&n>=o){h=n;m=o>j?j:o;}else{h=j;m=n>o?o:n;}}k.v=h;k.s=h?(h-m)/h:0;if(!k.s){k.h=0;}else{p=h-m;if(o==h){k.h=(n-j)/p;}else{if(n==h){k.h=2+(j-o)/p;}else{k.h=4+(o-n)/p;}}k.h=parseInt(k.h*60);if(k.h<0){k.h+=360;}}k.s=Math.floor(k.s*100);k.v=Math.floor(k.v*100);return k;},hsvToRgb:function(n){var r={r:0,g:0,b:0,a:100},m=n.h,x=n.s,u=n.v;if(x==0){if(u==0){r.r=r.g=r.b=0;}else{r.r=r.g=r.b=Math.floor(u*255/100);}}else{if(m==360){m=0;}m/=60;x=x/100;u=u/100;var l=Math.floor(m),o=m-l,k=u*(1-x),j=u*(1-(x*o)),w=u*(1-(x*(1-o)));switch(l){case 0:r.r=u;r.g=w;r.b=k;break;case 1:r.r=j;r.g=u;r.b=k;break;case 2:r.r=k;r.g=u;r.b=w;break;case 3:r.r=k;r.g=j;r.b=u;break;case 4:r.r=w;r.g=k;r.b=u;break;case 5:r.r=u;r.g=k;r.b=j;break;}r.r=Math.floor(r.r*255);r.g=Math.floor(r.g*255);r.b=Math.floor(r.b*255);}return r;}}};var f=e.jPicker.Color,c=e.jPicker.List,g=e.jPicker.ColorMethods;e.fn.jPicker=function(j){var h=arguments;return this.each(function(){var y=e(this),A=e.extend(true,{},e.fn.jPicker.defaults,j);if(y.get(0).nodeName.toLowerCase()=="input"){e.extend(true,A,{window:{bindToInput:true,expandable:true,input:y}});if(g.validateHex(y.val())){A.color.active=new f({hex:y.val(),a:A.color.active.get_A()});A.color.current=new f({hex:y.val(),a:A.color.active.get_A()});}}if(A.window.expandable){y.after('<span class="jPicker_Picker"><span class="jPicker_Color">&nbsp;</span><span class="jPicker_Alpha">&nbsp;</span><span class="jPicker_Icon" title="Click To Open Color Picker">&nbsp;</span><span class="jPicker_Container">&nbsp;</span></span>');}else{A.window.liveUpdate=false;}var W=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,p=null,u=null,aA=null,ax=null,aw=null,V=null,U=null,T=null,S=null,R=null,Q=null,X=null,ac=null,aC=null,am=null,ao=null,aq=null,K=null,ay=null,I=null,aa=null,aB=null,O=null,N=null,av=null,at=null,C=null,l=null,L=null,ar=null,ad=null,ak=null,o=null,m=null,E=null,w=null,ap=function(aF){M.active=aB.color;var aG=M.active,aH=r.clientPath,aE=aG.get_Hex();ac.add(aC).add(am).add(ao).add(aq).add(K).add(ay).removeAttr("checked");switch(aF){case"h":ac.attr({checked:true});B(p,"transparent");z(aA,0);af(aA,100);z(ax,260);af(ax,100);B(u,"transparent");z(V,0);af(V,100);z(U,260);af(U,100);z(T,260);af(T,100);z(S,260);af(S,100);z(Q,260);af(Q,100);break;case"s":aC.attr({checked:true});B(p,"transparent");z(aA,-260);af(aA,100);z(ax,-520);z(V,-260);af(V,100);z(U,-520);z(T,260);af(T,100);z(S,260);af(S,100);z(Q,260);af(Q,100);break;case"v":am.attr({checked:true});B(p,"000000");z(aA,-780);z(ax,260);af(aA,100);B(u,aE);z(V,-520);af(V,100);z(U,260);af(U,100);z(T,260);af(T,100);z(S,260);af(S,100);z(Q,260);af(Q,100);break;case"r":ao.attr({checked:true});B(p,"transparent");z(aA,-1040);af(aA,100);z(ax,-1300);B(u,"transparent");z(V,-1560);af(V,100);z(U,-1300);z(T,-780);z(S,-1040);z(Q,260);af(Q,100);break;case"g":aq.attr({checked:true});B(p,"transparent");z(aA,-1560);af(aA,100);z(ax,-1820);B(u,"transparent");z(V,-2600);af(V,100);z(U,-2340);z(T,-1820);z(S,-2080);z(Q,260);af(Q,100);break;case"b":K.attr({checked:true});B(p,"transparent");z(aA,-2080);af(aA,100);z(ax,-2340);B(u,"transparent");z(V,-3640);af(V,100);z(U,-3380);z(T,-2860);z(S,-3120);z(Q,260);af(Q,100);break;case"a":ay.attr({checked:true});B(p,"transparent");z(aA,-260);af(aA,100);z(ax,-520);z(V,260);af(V,100);z(U,260);af(U,100);z(T,260);af(T,100);z(S,260);af(S,100);z(R,260);af(R,100);z(Q,0);af(Q,100);break;default:throw ("Invalid Mode");break;}switch(aF){case"h":I.set_RangeX(0,100);I.set_RangeY(0,100);aa.set_RangeY(0,360);break;case"s":case"v":case"a":I.set_RangeX(0,360);I.set_RangeY(0,100);aa.set_RangeY(0,100);break;case"r":case"g":case"b":I.set_RangeX(0,255);I.set_RangeY(0,255);aa.set_RangeY(0,255);break;}M.mode=aF;x();I.draw();aa.draw();aj();if(al.expandable&&al.liveUpdate){o.css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent"});af(m,100-aG.get_A());if(al.bindToInput){al.input.val(aG.get_Rgba()||"").css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent",color:aG.get_V()>75?"#000000":"#ffffff"});}}e.isFunction(y.liveCallback)&&y.liveCallback(aG);},n=function(){x();I.draw();aa.draw();aj();M.active=aB.color;var aF=M.active;if(al.expandable&&al.liveUpdate){var aE=aF.get_Hex();o.css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent"});af(m,100-aF.get_A());if(al.bindToInput){al.input.val(aB.fields.hex.val()).css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent",color:aF.get_V()>75?"#000000":"#ffffff"});}}e.isFunction(y.liveCallback)&&y.liveCallback(aF);},D=function(){if(!aB||!I||!aa){return;}M.active=aB.color;var aE=aB.fields,aG=M.active;switch(M.mode){case"h":aE.saturation.val(I.get_X());aE.value.val(100-I.get_Y());if(aG.get_H()==null){aE.hue.val(0);}break;case"s":case"a":aE.hue.val(I.get_X());aE.value.val(100-I.get_Y());if(aG.get_S()==null){aE.saturation.val(100);}break;case"v":aE.hue.val(I.get_X());aE.saturation.val(100-I.get_Y());if(aG.get_V()==null){aE.value.val(100);}break;case"r":aE.green.val(255-I.get_Y());aE.blue.val(I.get_X());if(aG.get_R()==null){aE.red.val(0);}break;case"g":aE.red.val(255-I.get_Y());aE.blue.val(I.get_X());if(aG.get_G()==null){aE.green.val(0);}break;case"b":aE.red.val(I.get_X());aE.green.val(255-I.get_Y());if(aG.get_B()==null){aE.blue.val(0);}break;}if(aG.get_A()==null&&aE.alpha.val()==""){aE.alpha.val(100);}switch(M.mode){case"h":case"s":case"v":case"a":aB.setValuesFromHsva();break;case"r":case"g":case"b":aB.setValuesFromRgba();break;}aj();if(al.expandable&&al.liveUpdate){var aF=aG.get_Hex();o.css({backgroundColor:aF&&aF.length==6?"#"+aF:"transparent"});af(m,100-aG.get_A());if(al.bindToInput){al.input.val(aG.get_Rgba()||"").css({backgroundColor:aF&&aF.length==6?"#"+aF:"transparent",color:aG.get_V()>75?"#000000":"#ffffff"});}}e.isFunction(y.liveCallback)&&y.liveCallback(aG);},an=function(){if(!aB||!I||!aa){return;}M.active=aB.color;var aE=aB.fields,aG=M.active;switch(M.mode){case"h":aE.hue.val(360-aa.get_Y());if(aG.get_S()==null){aE.saturation.val(100);}if(aG.get_V()==null){aE.value.val(100);}break;case"s":aE.saturation.val(100-aa.get_Y());if(aG.get_H()==null){aE.hue.val(0);}if(aG.get_V()==null){aE.value.val(100);}break;case"v":aE.value.val(100-aa.get_Y());if(aG.get_H()==null){aE.hue.val(0);}if(aG.get_S()==null){aE.saturation.val(100);}break;case"r":aE.red.val(255-aa.get_Y());if(aG.get_G()==null){aE.green.val(0);}if(aG.get_B()==null){aE.blue.val(0);}break;case"g":aE.green.val(255-aa.get_Y());if(aG.get_R()==null){aE.red.val(0);}if(aG.get_B()==null){aE.blue.val(0);}break;case"b":aE.blue.val(255-aa.get_Y());if(aG.get_R()==null){aE.red.val(0);}if(aG.get_G()==null){aE.green.val(0);}break;case"a":aE.alpha.val(100-aa.get_Y());if(aG.get_R()==null){aE.red.val(0);}if(aG.get_G()==null){aE.green.val(0);}if(aG.get_B()==null){aE.blue.val(0);}break;}if(aG.get_A()==null&&aE.alpha.val()==""){aE.alpha.val(100);}switch(M.mode){case"h":case"s":case"v":aB.setValuesFromHsva();break;case"r":case"g":case"b":case"a":aB.setValuesFromRgba();break;}aj();if(al.expandable&&al.liveUpdate){var aF=aG.get_Hex();o.css({backgroundColor:aF&&aF.length==6?"#"+aF:"transparent"});af(m,100-aG.get_A());if(al.bindToInput){al.input.val(aG.get_Rgba()||"").css({backgroundColor:aF&&aF.length==6?"#"+aF:"transparent",color:aG.get_V()>75?"#000000":"#ffffff"});}}e.isFunction(y.liveCallback)&&y.liveCallback(aG);},x=function(){M.active=aB.color;var aH=0,aG=M.active;switch(y.settings.color.mode){case"h":aH=360-(aG.get_H()||0);break;case"s":aH=100-(aG.get_S()!=null?aG.get_S():100);break;case"v":aH=100-(aG.get_V()!=null?aG.get_V():100);break;case"r":aH=255-(aG.get_R()||0);break;case"g":aH=255-(aG.get_G()||0);break;case"b":aH=255-(aG.get_B()||0);break;case"a":aH=100-(aG.get_A()!=null?aG.get_A():100);break;}aa.set_Y(aH);var aF=0,aE=0;switch(y.settings.color.mode){case"h":aF=aG.get_S()!=null?aG.get_S():100;aE=100-(aG.get_V()!=null?aG.get_V():100);break;case"s":aF=aG.get_H()||0;aE=100-(aG.get_V()!=null?aG.get_V():100);break;case"v":aF=aG.get_H()||0;aE=100-(aG.get_S()!=null?aG.get_S():100);break;case"r":aF=aG.get_B()||0;aE=255-(aG.get_G()||0);break;case"g":aF=aG.get_B()||0;aE=255-(aG.get_R()||0);break;case"b":aF=aG.get_R()||0;aE=255-(aG.get_G()||0);break;case"a":aF=aG.get_H()||0;aE=100-(aG.get_V()||0);break;}I.set_X(aF);I.set_Y(aE);},aj=function(){aD();au();ab();},aD=function(){try{var aE=aB.color.get_Hex();C.css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent"});af(C,aB.color.get_A());}catch(aF){}},au=function(){if(!M||!aB){return;}M.active=aB.color;var aE=M.active;switch(M.mode){case"h":B(p,new f({h:aE.get_H()||0,s:100,v:100}).get_Hex());break;case"s":case"a":af(ax,100-(aE.get_S()!=null?aE.get_S():100));break;case"v":af(aA,aE.get_V()!=null?aE.get_V():100);break;case"r":af(ax,(aE.get_R()||0)/255*100);break;case"g":af(ax,(aE.get_G()||0)/255*100);break;case"b":af(ax,(aE.get_B()||0)/255*100);break;}af(aw,100-(aE.get_A()!=null?aE.get_A():100));},ab=function(){if(!M||!aB){return;}M.active=aB.color;var aI=M.active;switch(M.mode){case"h":af(R,100-(aI.get_A()!=null?aI.get_A():100));break;case"s":var aF=new f({h:aI.get_H()||0,s:100,v:aI.get_V()!=null?aI.get_V():100});B(u,aF.get_Hex());af(U,100-(aI.get_V()!=null?aI.get_V():100));af(R,100-(aI.get_A()!=null?aI.get_A():100));break;case"v":var aH=new f({h:aI.get_H()||0,s:aI.get_S()!=null?aI.get_S():100,v:100});B(u,aH.get_Hex());af(R,100-(aI.get_A()!=null?aI.get_A():100));break;case"r":case"g":case"b":var aJ=0,aG=0;if(M.mode=="r"){aJ=aI.get_B()||0;aG=aI.get_G()||0;}else{if(M.mode=="g"){aJ=aI.get_B()||0;aG=aI.get_R()||0;}else{if(M.mode=="b"){aJ=aI.get_R()||0;aG=aI.get_G()||0;}}}var aE=aG>aJ?aJ:aG;af(U,aJ>aG?((aJ-aG)/(255-aG))*100:0);af(T,aG>aJ?((aG-aJ)/(255-aJ))*100:0);af(S,aE/255*100);af(R,100-(aI.get_A()!=null?aI.get_A():100));break;case"a":B(u,aI.get_Hex()||"000000");break;}},B=function(aE,aF){aE.css({backgroundColor:aF&&aF.length==6?"#"+aF:"transparent"});},v=function(aE,aF){if(W&&(aF.indexOf("AlphaBar.png")!=-1||aF.indexOf("Bars.png")!=-1||aF.indexOf("Maps.png")!=-1)){aE.attr("pngSrc",aF);aE.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+aF+"', sizingMethod='scale')"});}else{aE.css({backgroundImage:"url("+aF+")"});}},z=function(aE,aF){aE.css({top:aF+"px"});},af=function(aF,aE){aF.css({visibility:aE>0?"visible":"hidden"});if(aE>0&&aE<100){if(W){var aG=aF.attr("pngSrc");if(aG!=null&&(aG.indexOf("AlphaBar.png")!=-1||aG.indexOf("Bars.png")!=-1||aG.indexOf("Maps.png")!=-1)){aF.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+aG+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+aE+")"});}else{aF.css({opacity:aE/100});}}else{aF.css({opacity:aE/100});}}else{if(aE==0||aE==100){if(W){var aG=aF.attr("pngSrc");if(aG!=null&&(aG.indexOf("AlphaBar.png")!=-1||aG.indexOf("Bars.png")!=-1||aG.indexOf("Maps.png")!=-1)){aF.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+aG+"', sizingMethod='scale')"});}else{aF.css({opacity:""});}}else{aF.css({opacity:""});}}}},G=function(){aB.fields.hex.val(M.current.get_Rgba()||"");aB.setValuesFromHex();e.isFunction(aB.valuesChanged)&&aB.valuesChanged(aB);},F=function(aE){ap(aE.target.value);},ag=function(){G();},t=function(){G();al.expandable&&y.hide();e.isFunction(y.cancelCallback)&&y.cancelCallback(M.active);},Z=function(){var aF=M.active;M.current=new f({hex:aF.get_Rgba()});var aE=aF.get_Hex();l.css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent"});af(l,aB.color.get_A());if(al.expandable){o.css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent"});af(m,100-aF.get_A());if(al.bindToInput){al.input.val(aF.get_Rgba()||"").css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent",color:aF.get_V()>75?"#000000":"#ffffff"});}}e.isFunction(y.commitCallback)&&y.commitCallback(aF);},q=function(){Z();al.expandable&&y.hide();},ai=function(){y.show();},Y=function(aG){var aE=al.element,aF=al.page;O=parseInt(X.css("left"));N=parseInt(X.css("top"));av=aG.pageX;at=aG.pageY;e(document).bind("mousemove",k).bind("mouseup",s);aG.stopPropagation();aG.preventDefault();return false;},k=function(aE){X.css({left:O-(av-aE.pageX)+"px",top:N-(at-aE.pageY)+"px"});aE.stopPropagation();aE.preventDefault();return false;},s=function(aE){e(document).unbind("mousemove",k).unbind("mouseup",s);aE.stopPropagation();aE.preventDefault();return false;},H=function(aE){aB.fields.hex.val(y.settings.window.input.val());aB.bindedHexKeyUp(aE);},J=function(aE){aB.fields.hex.val(new f({hex:e(this).attr("title")}).get_Rgba()||"");aB.setValuesFromHex();e.isFunction(aB.valuesChanged)&&aB.valuesChanged(aB);};e.extend(true,y,{id:y.attr("id"),settings:A,color:null,icon:null,commitCallback:e.isFunction(h[1])&&h[1]||null,liveCallback:e.isFunction(h[2])&&h[2]||null,cancelCallback:e.isFunction(h[3])&&h[3]||null,show:function(){if(document.all){var aF=false;for(i=0;i<c.length;i++){if(aF){c[i].color.add(c[i].icon).css({display:"none"});}if(c[i].id==y.id){aF=true;}}}M.current=new f({hex:M.active.get_Rgba()});var aE=M.active.get_Hex();l.css({backgroundColor:aE&&aE.length==6?"#"+aE:"transparent"});af(l,M.active.get_A());X.css({display:"block"});x();},hide:function(){if(document.all){var aE=false;for(i=0;i<c.length;i++){if(aE){c[i].color.add(c[i].icon).css({display:"block"});}if(c[i].id==y.id){aE=true;}}}X.css({display:"none"});},destroy:function(){if(al.expandable){E=X.find(".jPicker_Icon").eq(0).unbind("click",ai);}if(al.bindToInput){al.input.unbind("keyup",H).unbind("change",H);}ac.add(aC).add(am).add(ao).add(aq).add(K).unbind("click",F);l.unbind("click",ag);ad.unbind("click",t);ar.unbind("click",q);if(al.expandable){w.unbind("mousedown",Y);}X.find(".jPicker_QuickColor").eq(0).unbind("click",J);ac=null;aC=null;am=null;ao=null;aq=null;K=null;ay=null;p=null;u=null;aA=null;ax=null;aw=null;V=null;U=null;T=null;S=null;R=null;Q=null;L=null;C=null;l=null;ar=null;ad=null;ak=null;y.color=null;y.icon=null;I.destroy();I=null;aa.destroy();aa=null;aB.destroy();aB=null;y.commitCallback=null;y.cancelCallback=null;y.liveCallback=null;X.html("");for(i=0;i<c.length;i++){if(c[i].id==y.id){c.splice(i,1);}}}});var r=y.settings.images,al=y.settings.window,ah=y.settings.localization,M=y.settings.color;X=al.expandable?y.next().find(".jPicker_Container").eq(0):y;if(al.expandable){X.css({left:al.position.x=="left"?"-526px":al.position.x=="center"?"-259px":al.position.x=="right"?"0px":al.position.x=="screenCenter"?((e(document).width()>>1)-259)-y.next().offset().left+"px":al.position.x,position:"absolute",top:al.position.y=="top"?"-350px":al.position.y=="center"?"-158px":al.position.y=="bottom"?"25px":al.position.y});}if((typeof(M.active)).toString().toLowerCase()=="string"){M.active=new f({hex:M.active});}X.html('<table class="jPicker_table"><tbody>'+(al.expandable?'<tr><td class="jPicker_MoveBar" colspan="6">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="jPicker_Title">'+(al.title||ah.text.title)+'</h2><div class="jPicker_ColorMap"><span class="jPicker_ColorMap_l1">&nbsp;</span><span class="jPicker_ColorMap_l2">&nbsp;</span><span class="jPicker_ColorMap_l3">&nbsp;</span><img src="'+r.clientPath+r.colorMap.arrow.file+'" class="jPicker_ColorMap_Arrow"/></div></td><td rowspan="9"><div class="jPicker_ColorBar"><span class="jPicker_ColorBar_l1">&nbsp;</span><span class="jPicker_ColorBar_l2">&nbsp;</span><span class="jPicker_ColorBar_l3">&nbsp;</span><span class="jPicker_ColorBar_l4">&nbsp;</span><span class="jPicker_ColorBar_l5">&nbsp;</span><span class="jPicker_ColorBar_l6">&nbsp;</span><img src="'+r.clientPath+r.colorBar.arrow.file+'" class="jPicker_ColorBar_Arrow"/></div></td><td colspan="3" class="jPicker_Preview">'+ah.text.newColor+'<div class="jPicker_NewCurrent"><span class="jPicker_Active" title="'+ah.tooltips.colors.newColor+'">&nbsp;</span><span class="jPicker_Current" title="'+ah.tooltips.colors.currentColor+'">&nbsp;</span></div>'+ah.text.currentColor+'</td><td rowspan="9" class="jPicker_OkCancel"><input type="button" class="jPicker_Ok" value="'+ah.text.ok+'" title="'+ah.tooltips.buttons.ok+'"/><input type="button" class="jPicker_Cancel" value="'+ah.text.cancel+'" title="'+ah.tooltips.buttons.cancel+'"/><hr/><div class="jPicker_Grid">&nbsp;</div></td></tr><tr><td><input type="radio" class="jPicker_HueRadio" id="jPicker_Hue_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="h" title="'+ah.tooltips.hue.radio+'"/></td><td><label for="jPicker_Hue_'+c.length+'" title="'+ah.tooltips.hue.radio+'">H:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_HueText" value="'+M.active.get_H()+'" title="'+ah.tooltips.hue.textbox+'"/> &deg;</td></tr><tr><td><input type="radio" class="jPicker_SaturationRadio" id="jPicker_Saturation_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="s" title="'+ah.tooltips.saturation.radio+'"/></td><td><label for="jPicker_Saturation_'+c.length+'" title="'+ah.tooltips.saturation.radio+'">S:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_SaturationText" value="'+M.active.get_S()+'" title="'+ah.tooltips.saturation.textbox+'"/> %</td></tr><tr><td><input type="radio" class="jPicker_BrightnessRadio" id="jPicker_Brightness_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="v" title="'+ah.tooltips.brightness.radio+'"/><br/><br/></td><td><label for="jPicker_Brightness_'+c.length+'" title="'+ah.tooltips.brightness.radio+'">B:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_BrightnessText" value="'+M.active.get_V()+'" title="'+ah.tooltips.brightness.textbox+'"/> %</td></tr><tr><td><input type="radio" class="jPicker_RedRadio" id="jPicker_Red_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="r" title="'+ah.tooltips.red.radio+'"/></td><td><label for="jPicker_Red_'+c.length+'" title="'+ah.tooltips.red.radio+'">R:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_RedText" value="'+M.active.get_R()+'" title="'+ah.tooltips.red.textbox+'"/></td></tr><tr><td><input type="radio" class="jPicker_GreenRadio" id="jPicker_Green_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="g" title="'+ah.tooltips.green.radio+'"/></td><td><label for="jPicker_Green_'+c.length+'" title="'+ah.tooltips.green.radio+'">G:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_GreenText" value="'+M.active.get_G()+'" title="'+ah.tooltips.green.textbox+'"/></td></tr><tr><td><input type="radio" class="jPicker_BlueRadio" id="jPicker_Blue_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="b" title="'+ah.tooltips.blue.radio+'"/></td><td><label for="jPicker_Blue_'+c.length+'" title="'+ah.tooltips.blue.radio+'">B:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_BlueText" value="'+M.active.get_B()+'" title="'+ah.tooltips.blue.textbox+'"/></td></tr><tr><td><input type="radio" class="jPicker_AlphaRadio" id="jPicker_Alpha_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="a" title="'+ah.tooltips.alpha.radio+'"/></td><td><label for="jPicker_Alpha_'+c.length+'" title="'+ah.tooltips.alpha.radio+'">A:</label></td><td class="jPicker_Text"><input type="text" class="jPicker_AlphaText" value="'+M.active.get_A()+'" title="'+ah.tooltips.alpha.textbox+'"/> %</td></tr><tr><td class="jPicker_HexCol"><label for="jPicker_Hex_'+c.length+'" title="'+ah.tooltips.hex.textbox+'">#:</label></td><td class="jPicker_EnterHex" colspan="2"><input type="text" class="jPicker_HexText" id="jPicker_Hex_'+c.length+'" value="'+M.active.get_Rgba()+'" title="'+ah.tooltips.hex.textbox+'"/></td></tr></tbody></table>');ac=X.find(".jPicker_HueRadio").eq(0);aC=X.find(".jPicker_SaturationRadio").eq(0);am=X.find(".jPicker_BrightnessRadio").eq(0);ao=X.find(".jPicker_RedRadio").eq(0);aq=X.find(".jPicker_GreenRadio").eq(0);K=X.find(".jPicker_BlueRadio").eq(0);ay=X.find(".jPicker_AlphaRadio").eq(0);p=X.find(".jPicker_ColorMap").eq(0);u=X.find(".jPicker_ColorBar").eq(0);aA=X.find(".jPicker_ColorMap_l1").eq(0);ax=X.find(".jPicker_ColorMap_l2").eq(0);aw=X.find(".jPicker_ColorMap_l3").eq(0);V=X.find(".jPicker_ColorBar_l1").eq(0);U=X.find(".jPicker_ColorBar_l2").eq(0);T=X.find(".jPicker_ColorBar_l3").eq(0);S=X.find(".jPicker_ColorBar_l4").eq(0);R=X.find(".jPicker_ColorBar_l5").eq(0);Q=X.find(".jPicker_ColorBar_l6").eq(0);L=X.find(".jPicker_NewCurrent").eq(0);var ae=M.active.get_Hex();C=X.find(".jPicker_Active").eq(0).css({backgroundColor:ae&&ae.length==6?"#"+ae:"transparent"});l=X.find(".jPicker_Current").eq(0).css({backgroundColor:ae&&ae.length==6?"#"+ae:"transparent"});ar=X.find(".jPicker_Ok").eq(0);ad=X.find(".jPicker_Cancel").eq(0);ak=X.find(".jPicker_Grid").eq(0);y.color=e(".Picker_Color").eq(0);y.icon=e(".jPicker_Icon").eq(0);aB=new b(X,n);I=new d(X.find(".jPicker_ColorMap").eq(0),{map:{width:r.colorMap.width,height:r.colorMap.height},arrow:{image:r.clientPath+r.colorMap.arrow.file,width:r.colorMap.arrow.width,height:r.colorMap.arrow.height}},D);aa=new d(X.find(".jPicker_ColorBar").eq(0),{map:{width:r.colorBar.width,height:r.colorBar.height},arrow:{image:r.clientPath+r.colorBar.arrow.file,width:r.colorBar.arrow.width,height:r.colorBar.arrow.height}},an);v(aA,r.clientPath+"Maps.png");v(ax,r.clientPath+"Maps.png");v(aw,r.clientPath+"map-opacity.png");v(V,r.clientPath+"Bars.png");v(U,r.clientPath+"Bars.png");v(T,r.clientPath+"Bars.png");v(S,r.clientPath+"Bars.png");v(R,r.clientPath+"bar-opacity.png");v(Q,r.clientPath+"AlphaBar.png");v(L,r.clientPath+"preview-opacity.png");if(al.expandable){o=y.next().find(".jPicker_Color").eq(0).css({backgroundColor:ae&&ae.length==6?"#"+ae:"transparent"});m=y.next().find(".jPicker_Alpha").eq(0);v(m,r.clientPath+"bar-opacity.png");af(m,100-M.active.get_A());E=y.next().find(".jPicker_Icon").eq(0).css({backgroundImage:"url("+r.clientPath+r.picker.file+")"}).bind("click",ai);if(al.bindToInput){al.input.bind("keyup",H).bind("change",H);}}ac.add(aC).add(am).add(ao).add(aq).add(K).add(ay).bind("click",F);l.bind("click",ag);ad.bind("click",t);ar.bind("click",q);if(al.expandable){w=X.find(".jPicker_MoveBar").eq(0).bind("mousedown",Y);}if(M.quickList&&M.quickList.length>0){ak.html("");for(i=0;i<M.quickList.length;i++){if((typeof(M.quickList[i])).toString().toLowerCase()=="string"){M.quickList[i]=new f({hex:M.quickList[i]});}var az=M.quickList[i].get_Rgba();ak.append('<span class="jPicker_QuickColor" title="'+(az&&"#"+az||"")+'">&nbsp;</span>');var P=M.quickList[i].get_Hex();X.find(".jPicker_QuickColor").eq(i).css({backgroundColor:P&&P.length==6?"#"+P:"transparent",backgroundImage:P?"none":"url("+r.clientPath+"NoColor.png)"}).click(J);}}ap(M.mode);aB.fields.hex.val(M.active.get_Rgba()||"");aB.setValuesFromHex();x();aj();if(!al.expandable){y.show();}c.push(y);});};e.fn.jPicker.defaults={window:{title:null,position:{x:"screenCenter",y:"top"},expandable:false,liveUpdate:true},color:{mode:"h",active:new f({hex:"#ffcc00ff"}),quickList:[new f({h:360,s:33,v:100}),new f({h:360,s:66,v:100}),new f({h:360,s:100,v:100}),new f({h:360,s:100,v:75}),new f({h:360,s:100,v:50}),new f({h:180,s:0,v:100}),new f({h:30,s:33,v:100}),new f({h:30,s:66,v:100}),new f({h:30,s:100,v:100}),new f({h:30,s:100,v:75}),new f({h:30,s:100,v:50}),new f({h:180,s:0,v:90}),new f({h:60,s:33,v:100}),new f({h:60,s:66,v:100}),new f({h:60,s:100,v:100}),new f({h:60,s:100,v:75}),new f({h:60,s:100,v:50}),new f({h:180,s:0,v:80}),new f({h:90,s:33,v:100}),new f({h:90,s:66,v:100}),new f({h:90,s:100,v:100}),new f({h:90,s:100,v:75}),new f({h:90,s:100,v:50}),new f({h:180,s:0,v:70}),new f({h:120,s:33,v:100}),new f({h:120,s:66,v:100}),new f({h:120,s:100,v:100}),new f({h:120,s:100,v:75}),new f({h:120,s:100,v:50}),new f({h:180,s:0,v:60}),new f({h:150,s:33,v:100}),new f({h:150,s:66,v:100}),new f({h:150,s:100,v:100}),new f({h:150,s:100,v:75}),new f({h:150,s:100,v:50}),new f({h:180,s:0,v:50}),new f({h:180,s:33,v:100}),new f({h:180,s:66,v:100}),new f({h:180,s:100,v:100}),new f({h:180,s:100,v:75}),new f({h:180,s:100,v:50}),new f({h:180,s:0,v:40}),new f({h:210,s:33,v:100}),new f({h:210,s:66,v:100}),new f({h:210,s:100,v:100}),new f({h:210,s:100,v:75}),new f({h:210,s:100,v:50}),new f({h:180,s:0,v:30}),new f({h:240,s:33,v:100}),new f({h:240,s:66,v:100}),new f({h:240,s:100,v:100}),new f({h:240,s:100,v:75}),new f({h:240,s:100,v:50}),new f({h:180,s:0,v:20}),new f({h:270,s:33,v:100}),new f({h:270,s:66,v:100}),new f({h:270,s:100,v:100}),new f({h:270,s:100,v:75}),new f({h:270,s:100,v:50}),new f({h:180,s:0,v:10}),new f({h:300,s:33,v:100}),new f({h:300,s:66,v:100}),new f({h:300,s:100,v:100}),new f({h:300,s:100,v:75}),new f({h:300,s:100,v:50}),new f({h:180,s:0,v:0}),new f({h:330,s:33,v:100}),new f({h:330,s:66,v:100}),new f({h:330,s:100,v:100}),new f({h:330,s:100,v:75}),new f({h:330,s:100,v:50}),new f()]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},brightness:{radio:"Set To &ldquo;Brightness&rdquo; Color Mode",textbox:"Enter A &ldquo;Brightness&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)"}}}};})(jQuery,"1.0.13");